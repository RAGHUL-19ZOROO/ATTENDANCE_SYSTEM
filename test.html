<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Staff Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
    background: linear-gradient(135deg,#6a0dad,#4b0082);
    color:white;
    min-height:100vh;
}

/* SIDEBAR */
.sidebar{
    width:230px;
    height:100vh;
    position:fixed;
    background: rgba(0,0,0,0.2);
    padding:20px;
}

.sidebar h4{
    font-weight:bold;
    margin-bottom:30px;
}

.sidebar a{
    display:block;
    color:white;
    padding:10px;
    text-decoration:none;
    border-radius:8px;
    margin-bottom:5px;
}

.sidebar a:hover{
    background: rgba(255,255,255,0.1);
}

.main{
    margin-left:250px;
    padding:30px;
}

/* CARDS */
.card-theme{
    background: rgba(255,255,255,0.05);
    border:none;
    border-radius:18px;
    padding:20px;
    backdrop-filter: blur(10px);
}

.table{
    color:white;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h4>LEE<br>ATTENDANCE</h4>

    <a href="/staff_dashboard">Dashboard</a>
    <a href="/view_students">View Students</a>
    <a href="/logout" class="text-danger">Logout</a>
</div>

<div class="main">

<h3 class="mb-4">Staff Dashboard</h3>

<!-- SEARCH STUDENT -->
<div class="card-theme mb-4">
    <h5>Check Student Attendance</h5>

    <form method="POST">
        <div class="row">

            <div class="col-md-4">
                <label>Register Number</label>
                <input type="text" name="reg_no" class="form-control" required>
            </div>

            <div class="col-md-3 d-flex align-items-end">
                <button class="btn btn-light w-100">View</button>
            </div>

        </div>
    </form>
</div>

<!-- STUDENT RESULT -->
{% if student %}
<div class="card-theme mb-4">
    <h5>Student Details</h5>

    <div class="row mt-3">
        <div class="col-md-3">Name: {{ student.name }}</div>
        <div class="col-md-3">Reg: {{ student.register_no }}</div>
        <div class="col-md-3">Dept: {{ student.department }}</div>
        <div class="col-md-3">Attendance: {{ percentage }}%</div>
    </div>

    <div class="mt-3">
        Status:
        {% if percentage < 75 %}
            <span class="badge bg-danger">Shortage</span>
        {% else %}
            <span class="badge bg-success">Good</span>
        {% endif %}
    </div>
</div>
{% endif %}

<!-- HISTORY -->
{% if attendance_records %}
<div class="card-theme">
    <h5>Attendance History</h5>

    <table class="table mt-3">
        <thead>
            <tr>
                <th>Date</th>
                <th>Subject</th>
                <th>Status</th>
            </tr>
        </thead>

        <tbody>
        {% for a in attendance_records %}
            <tr>
                <td>{{ a.date }}</td>
                <td>{{ a.subject }}</td>
                <td>{{ a.status }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

</div>
</body>
</html>