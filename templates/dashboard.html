<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    

 

</head>
<body id="back">
    <nav class="navbar bg-body-tertiary m-1 rounded-5 p-2 bg-light bg-opacity-25"style="backdrop-filter: blur(3px);background: linear-gradient(-60deg,rgb(186,208,223),rgb(65,151,185));border:linear-gradient(-60deg,pink,blue);border-width: 2vh;">
  <div class="container-fluid">
    <div class="container-fluid navbar-expand-lg" >
          <a class="navbar-brand text-dark " href="#"><img src="static/images/icons8-attendance-96.png">LEE ATTENDANCE 
          </a>
  </div>
</nav>

<div class="container mt-5">

    <div class="time card shadow p-4 rounded-3 m-4 bg-light bg-opacity-25"style="backdrop-filter: blur(3px);">

        <h3 class="text-center mb-3">Class Attendance List</h3>

        {% if locked %}
        <div class="alert alert-success text-center">
            Attendance already submitted for this date ðŸ”’
        </div>
        {% endif %}

        <form method="POST" action="/save">

            <div class="row mb-3">
                <div class="col-md-3">
                   
                    <input type="date" name="date"
                           value="{{selected_date}}"
                           class="form-control" required>
                </div>

                <div class="col-md-3">
                    <input type="text" id="searchInput"
                           class="form-control"
                           placeholder="Search Student ID...">
                </div>
                <div class="col-md-3  ">
                    <select class="form-select " name="department" required>
                        <option value="">Select Department</option>
                        <option value="CSE">CSE</option>
                        <option value="ECE">ECE</option>
                        <option value="MECH">MECH</option>
                        <option value="CIVIL">CIVIL</option>
                    <option value="AI&DS">AI&DS</option>
                    </select>
                </div>                

                <div class="col-md-3">
                    <!-- disable save if locked -->
                    <button class="btn btn-primary"
                            {% if locked %}disabled{% endif %}>
                        Save Attendance
                    </button>
                </div>
            </div>

            <div class="card shadow p-3 rounded-4">

                <table id="studentTable"
                       class="table table-bordered  text-center">

                    <thead class="table-primary">
                        <tr>
                            <th>Student ID</th>
                            <th>Student Name</th>
                            <th>Status</th>
                        </tr>
                    </thead>

                    <tbody>
                    {% for s in students %}
                        <tr>
                            <td>{{ s.student_id }}</td>
                            <td>{{ s.student_name }}</td>
                            <td>

                                <!-- disable dropdown if locked -->
                                <select name="status_{{s.student_id}}"
                                        class="form-select"
                                        {% if locked %}disabled{% endif %}>

                                    <option value="present">Present</option>
                                    <option value="absent">Absent</option>
                                    <option value="excused">Excused</option>
                                </select>

                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>

                </table>

            </div>
        </form>
    </div>
</div>

<style>
#back{
    background: linear-gradient(120deg,rgb(186,208,223),rgb(65,151,185));
    background-attachment: scroll;
}
</style>

<script>
document.getElementById("searchInput").addEventListener("keyup", function() {
    let value = this.value.toLowerCase();
    let rows = document.querySelectorAll("#studentTable tbody tr");

    rows.forEach(function(row) {
        let text = row.innerText.toLowerCase();
        row.style.display = text.includes(value) ? "" : "none";
    });
});
</script>
<style>
   @media (max-width:700px){

    .container{
        width:100% !important;
        padding:10px !important;
        margin:0 !important;
    }

    .time{
        margin:0 !important;
        padding:15px !important;
        height: min(40px,100%);
    }

    h3{
        font-size:18px;
    }

    .row.mb-3{
        display:flex;
        flex-direction:column;
        gap:10px;
    }

    .row.mb-3 .col-md-3{
        width:100%;
    }

    button.btn{
        width:100%;
    }

    table{
        font-size:12px;
    }

    th,td{
        padding:6px !important;
    }

    .navbar-brand{
        font-size:14px;
    }

    .navbar img{
        width:28px;
    }
}

        
    
</style>

</body>
</html>
