<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Students</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        html {
            background-color: #3b0a8a;
            /* match your gradient's edge color */
        }

        body {
            min-height: 100vh;
            background: radial-gradient(circle at top, #5f046b, #480bb9);
             background-attachment: fixed;
            background-repeat: no-repeat;



            background-repeat: no-repeat;
            background-attachment: fixed;


            color: white;
            font-family: 'Segoe UI', sans-serif;
        }



        /* NAV */
        .navbar {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
        }

        /* CARD */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(16px);
            border-radius: 18px;
            padding: 25px;
        }

        /* TABLE */
        .table {
            border-radius: 12px;
            overflow: hidden;
        }

        thead {
            background: #0f172a;
            color: #60a5fa;
        }

        tbody tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* MOBILE */
        @media(max-width:768px) {
            .table-wrapper {
                overflow-x: auto
            }

            table {
                min-width: 900px
            }

            .btn {
                width: 100%
            }
        }
    </style>
</head>

<body>

    <nav class="navbar p-3 d-flex justify-content-between">
        <span class="fw-bold">LEE ATTENDANCE</span>
        <a href="/admin_dashboard" class="btn btn-outline-light btn-sm">Back</a>
    </nav>

    <div class="container mt-4">

        <div class="glass">

            <h4 class="text-center mb-4">Students Attendance</h4>

            <!-- FILTER BAR -->
            <form method="POST" class="row g-2" action="">

                <div class="col-md-4">
                    <input type="date" id="dateinput" name="date" class="form-control" required>
                </div>

                <div class="col-md-3">
                    <select name="hour" class="form-control">
                        <option value="">Full Day</option>
                        <option value="p1">P1</option>
                        <option value="p2">P2</option>
                        <option value="p3">P3</option>
                        <option value="p4">P4</option>
                        <option value="p5">P5</option>
                        <option value="p6">P6</option>
                        <option value="p7">P7</option>
                        <option value="p8">P8</option>
                    </select>
                </div>

                <div class="col-md-2">
                    <button type="submit" class="btn btn-dark w-100">
                        Search
                    </button>
                </div>

            </form>

            <!-- EXPORT -->
            <div class="d-flex flex-wrap gap-2 mt-3">

                <button onclick="downloadDay()" class="btn btn-success">
                    Full Day Excel
                </button>

                <button onclick="downloadLast()" class="btn btn-warning">
                    Last Hour Excel
                </button>

            </div>

            <div class="table-wrapper">

                <table class="table table-bordered text-center mt-4">

                    <thead>
                        <tr>
                            <th>Student ID</th>
                            <th>Name</th>
                            <th>P1</th>
                            <th>P2</th>
                            <th>P3</th>
                            <th>P4</th>
                            <th>P5</th>
                            <th>P6</th>
                            <th>P7</th>
                            <th>P8</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for s in students %}
                        <tr>
                            <td>{{s.student_id}}</td>
                            <td>{{s.student_name}}</td>
                            <td>{{s.p1}}</td>
                            <td>{{s.p2}}</td>
                            <td>{{s.p3}}</td>
                            <td>{{s.p4}}</td>
                            <td>{{s.p5}}</td>
                            <td>{{s.p6}}</td>
                            <td>{{s.p7}}</td>
                            <td>{{s.p8}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>

                </table>

            </div>

        </div>
    </div>
    <script>
        function downloadDay() {
            let d = document.getElementById("dateinput").value
            if (!d) {
                alert("Select date first")
                return
            }
            window.location = "/export/day?date=" + d
        }

        function downloadLast() {
            let d = document.getElementById("dateinput").value
            if (!d) {
                alert("Select date first")
                return
            }
            window.location = "/export/last?date=" + d
        }
    </script>

</body>

</html>